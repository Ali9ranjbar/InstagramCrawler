from preprocess.PolarityNormalizer import PolarityNormalizer
import sys
import logging
import os
import json
import re
import string


class PersianPolarity:

    def __init__(self, logger):
        self.src_path = os.path.abspath(__file__)
        self.root_path = self.src_path.replace('PersianPolarity.py', '')  # get current loc. of Disk
        self.logger = logger
        self.AlphabetList = ['Ø§', 'Ø¨', 'Ù¾', 'Øª', 'Øª', 'Ø«', 'Ø¬', 'Ú†', 'Ø­', 'Ø®', 'Ø¯', 'Ø°', 'Ø±', 'Ø²', 'Ø³', 'Ø´', 'Øµ', 'Ø¶',
                             'Ø·',
                             'Ø¸',
                             'Ø¹', 'Øº', 'Ù', 'Ù‚', 'Ú©', 'Ú¯', 'Ù„', 'Ù…', 'Ù†', 'Ùˆ', 'Ù‡', 'ÛŒ', 'Ø¢', 'Ø¢', 'Ø¦', 'Ø£', 'Ø¤', 'Ú˜',
                             'ÙŠ',
                             'Ù¾',
                             'Û€', 'Û€', 'Ø©', 'Ø¤', 'ÙŠ', 'Ø¤', 'Ø¥', 'Ø£', 'Ø¡', ':,-)', '=)', ':)', '8)',
                             'ğŸŒ´', 'â­•', 'ğŸ˜€', 'ğŸ’', 'ğŸ˜ƒ', 'ğŸ˜„', 'ğŸ¦–', 'ğŸŒŸ', 'ğŸ‚', 'ğŸ˜', 'ğŸŠ', 'ğŸ“', 'ğŸ˜†', 'ğŸ˜…', 'ğŸ”ª',
                             ':ğŸ¤£',
                             'ğŸ˜‚', 'ğŸ™‚', 'â£', 'ğŸ™ƒ', 'â˜˜', 'ğŸ˜‰', 'ğŸ˜Š', 'ğŸ˜‡', 'ğŸ¥°', 'ğŸ˜', 'ğŸ¤©', '', 'ğŸ˜˜', 'ğŸ“˜', 'ğŸ˜—', 'â˜º',
                             'ğŸ˜š',
                             'ğŸ˜™', 'ğŸ˜‹', 'ğŸ˜›', 'ğŸ˜œ', 'ğŸ¤ª', 'ğŸ’«', 'ğŸ””', 'âœ…', 'ğŸ˜', 'ğŸ¤‘', 'ğŸ¤—', 'ğŸ¤­', 'ğŸ¤«', 'ğŸ–¤', 'ğŸ½ï¸',
                             'ğŸ¼ï¸',
                             'ğŸ¤”', 'ğŸ¤', 'ğŸ¤¨', 'ğŸ˜', 'ğŸ˜‘', 'ğŸ˜¶', 'ğŸ“¥', 'ğŸ’£', 'ğŸ€', 'ğŸ¦‹', 'ğŸ’£', 'ğŸ“Œ', 'ğŸ˜', 'ğŸ˜’', 'ğŸ™„',
                             'ğŸ“†',
                             'ğŸ˜¬', 'ğŸ¤¥', 'ğŸ˜Œ', 'ğŸ˜”', 'ğŸ˜ª', 'ğŸ¤¤', 'ğŸŒ’', 'ğŸ˜´', 'ğŸ˜·', 'ğŸ¤’', 'ğŸ¤•', 'ğŸ¤¢', 'ğŸ¤®', 'ğŸ¤§', 'ğŸ¥µ',
                             'ğŸ¥¶',
                             'ğŸ¥´', 'ğŸ˜µ', 'ğŸ¤¯', 'ğŸ¤ ', 'ğŸ¦Œ', 'ğŸ¥³', 'ğŸ˜', 'ğŸ¤“', 'ğŸ§', 'ğŸ˜•', 'ğŸ»', 'ğŸš¨', 'ğŸ˜Ÿ', 'ğŸ™', 'â˜¹',
                             'ğŸ˜®',
                             'ğŸ˜¯',
                             'ğŸ˜²', 'ğŸ˜³', 'ğŸ¥º', 'ğŸ˜¦', 'ğŸ˜§', 'ğŸ’ï¸', 'ğŸŒ¶', 'ğŸ¶', 'ğŸ˜¨', 'ğŸ˜°', 'ğŸ˜¥', 'ğŸ˜¢', 'ğŸ˜­', 'ğŸ˜±', 'ğŸ˜–',
                             'ğŸ˜£',
                             'ğŸ˜', 'ğŸ˜“', 'ğŸ˜©', 'ğŸ˜«', 'ğŸ’•', 'ğŸ˜¤', 'ğŸ˜¡', 'ğŸ˜ ', 'ğŸ¤¬', 'ğŸ´', 'ğŸ¥', 'ğŸ˜ˆ', 'ğŸ‘¿', 'ğŸ”¸', 'ğŸŒ¸',
                             'ğŸ’€',
                             'â˜ ',
                             'ğŸ’©', 'ğŸ¤¡', 'ğŸ‘¹', 'ğŸ‘º', 'ğŸ‘»', 'ğŸ‘½', 'ğŸ‘¾', 'â˜”', 'ğŸ¤–', 'ğŸ˜º', 'ğŸ˜¸', 'ğŸ˜¹', 'ğŸ˜»', 'ğŸ˜¼', 'ğŸ˜½',
                             'ğŸ™€',
                             'ğŸ˜¿',
                             'ğŸ˜¾', 'ğŸ’‹', 'ğŸ‘‹', 'ğŸ¤š', 'ğŸ–', 'ğŸ’”', 'âœ‹', 'ğŸ™ˆ', 'ğŸ’š', 'ğŸ––', 'ğŸ‘Œ', 'âœŒ', 'ğŸ¤', 'ğŸ¤Ÿ', 'ğŸ¤˜',
                             'ğŸ”¥',
                             'ğŸ¤™',
                             'ğŸ‘ˆ', 'ğŸ‘‰', 'ğŸ‘†', 'ğŸ–•', 'ğŸ‘‡', 'â˜', 'ğŸ‘', 'ğŸ‘', 'ğŸ’œ', 'âœŠ', 'ğŸ‘Š', 'ğŸ¤›', 'ğŸ¤œ', 'ğŸ‘', 'ğŸ™Œ',
                             'ğŸ‘',
                             'ğŸ¤²',
                             'ğŸ¤', 'ğŸ™', 'âœ', 'ğŸ’…', 'ğŸ¤³', 'ğŸ”°', 'ğŸ’ª', 'ğŸ¦µ', 'ğŸ¦¶', 'ğŸ’¥', 'ğŸ‘‚', 'ğŸ‘ƒ', 'ğŸ§ ', 'ğŸ‚', 'ğŸ¥',
                             'ğŸŒ¸',
                             'ğŸŒº',
                             'ğŸ¾', 'âœ¨', 'ğŸ¦·', 'ğŸ¦´', 'ğŸ‘€', 'ğŸ‘', 'ğŸ‘…', 'ğŸ‘„', 'ğŸ‘¶', 'ğŸ§’', 'ğŸ‘¦', 'ğŸ‘§', 'ğŸ§‘', 'ğŸ‘±', 'ğŸ‘¨',
                             'ğŸ§”',
                             'ğŸ‘±',
                             'ğŸ‘¨', 'ğŸ‘¨', 'ğŸ‘¨', 'ğŸ‘¨', 'ğŸ‘©', 'ğŸ‘±', 'ğŸ‘©', 'ğŸ‘©', 'ğŸ‘©', 'ğŸ‘©', 'ğŸ§“', 'â™¦', 'ğŸ‘´', 'ğŸ‘µ', 'ğŸ™',
                             'ğŸ™',
                             'ğŸ™',
                             'ğŸ™', 'ğŸ™', 'ğŸ™', 'ğŸ™…', 'ğŸ™…', 'ğŸ™…', 'ğŸ™†', 'ğŸ™†', 'ğŸ™†', 'ğŸ’', 'ğŸ’', 'ğŸ’', 'ğŸ™‹', 'ğŸ™‹', 'ğŸ™‹',
                             'ğŸ™‡',
                             'ğŸ™‡', 'ğŸ™‡', 'ğŸ¤¦', 'ğŸ¤¦', 'ğŸ¤¦', 'ğŸ¤·', 'ğŸ¤·', 'ğŸ¤·', 'ğŸ‘¨', 'ğŸ‘©', 'ğŸ‘¨', 'ğŸ‘©', 'ğŸ‘¨', 'ğŸ‘©', 'ğŸ‘¨',
                             'ğŸ‘©',
                             'ğŸ‘¨', 'ğŸ‘©', 'ğŸ‘¨', 'ğŸ‘©', 'ğŸ‘¨', 'ğŸ‘©', 'ğŸ‘¨', 'ğŸ‘©', 'ğŸ‘¨', 'ğŸ‘©', 'ğŸ‘¨', 'ğŸ‘©', 'ğŸ‘¨', 'ğŸ‘©', 'ğŸ“²',
                             'ğŸ‘¨',
                             'ğŸ‘©', 'ğŸ‘¨', 'ğŸ‘©', 'ğŸ‘¨', 'ğŸ‘©', 'ğŸ‘¨', 'ğŸ‘©', 'ğŸ‘¨', 'ğŸ‘©', 'ğŸ‘®', 'ğŸ‘®', 'ğŸ‘®', 'ğŸ†', 'ğŸ•µ', 'ğŸ•µ',
                             'ğŸ•µ',
                             'ğŸ’‚', 'ğŸ’‚', 'ğŸ’‚', 'ğŸ‘·', 'ğŸ‘·', 'ğŸ‘·', 'ğŸ¤´', 'ğŸ‘¸', 'ğŸ‘³', 'ğŸ‘³', 'ğŸ‘³', 'ğŸ‘²', 'ğŸ§•', 'ğŸ¤µ', 'ğŸ‘°',
                             'ğŸ¤°',
                             'ğŸŒ¹', 'â¬‡', 'â™‚', 'â¤', 'ğŸ¤±', 'ğŸ‘¼', 'ğŸ…', 'ğŸ¤¶', 'ğŸ’™', 'ğŸ', 'ğŸ¦¸', 'ğŸ¦¸', 'ğŸ¦¹', 'ğŸ¦¹', 'âœ', 'â™€',
                             'ğŸ¦¹',
                             'ğŸ§™', 'ğŸ§™', 'ğŸ§™', 'ğŸ§š', 'ğŸ§š', 'ğŸ§š', 'ğŸ§›', 'ğŸ§›', 'â¿', 'ğŸ§›', 'ğŸ§œ', 'ğŸ§œ', 'ğŸ§œ', 'ğŸ§', 'ğŸ§',
                             'ğŸ§',
                             'ğŸ§',
                             'ğŸ§', 'ğŸ§', 'ğŸ§Ÿ', 'ğŸ§Ÿ', 'ğŸ”´', 'ğŸ’†', 'ğŸ’†', 'ğŸ’†', 'ğŸ’‡', 'ğŸ’‡', 'ğŸ’‡', 'ğŸš¶', 'ğŸš¶', 'ğŸš¶', 'ğŸƒ',
                             'ğŸƒ',
                             'ğŸƒ', 'ğŸ’ƒ', 'ğŸ•º', 'ğŸ•´', 'ğŸ‘¯', 'ğŸ‘¯', 'ğŸ‘¯', 'ğŸ’¢', 'ğŸ»', 'ğŸ§–', 'ğŸ§–', 'ğŸ§˜', 'ğŸ‘­', 'ğŸ‘«', 'ğŸ‘¬',
                             'ğŸ’',
                             'ğŸ‘¨', 'ğŸ‘©', 'ğŸ’‘', 'ğŸ‘¨', 'ğŸ‘©', 'ğŸ‘ª', 'ğŸ‘¨', 'ğŸ‘¨', 'ğŸ‘¨', 'ğŸ‘¨', 'ğŸ‘¨', 'ğŸ‘¨', 'ğŸ‘¨', 'ğŸ‘¨', 'ğŸ’™',
                             'ğŸ’›',
                             'ğŸ”µ', 'âš«', 'ğŸ‘¨', 'ğŸ‘¨', 'ğŸ‘©', 'ğŸ‘©', 'ğŸ‘©', 'ğŸ‘©', 'ğŸ‘©', 'ğŸ”º', 'ğŸ‘¨', 'ğŸ‘¨', 'ğŸ‘¨', 'ğŸ‘¨', 'ğŸ‘¨',
                             'ğŸ‘©',
                             'ğŸ‘©',
                             'ğŸ‘©', 'ğŸ‘©', 'ğŸ‘©', 'ğŸ—£', 'ğŸ‘¤', 'ğŸ‘¥', 'ğŸ‘£', 'ğŸ§³', 'ğŸŒ‚', 'â˜‚', 'ğŸ§µ', 'ğŸ§¶', 'ğŸ‘“', 'ğŸ•¶', 'ğŸ¥½',
                             'ğŸ¥¼',
                             'ğŸ‘”',
                             'ğŸ‘•', 'ğŸ‘–', 'ğŸ§£', 'ğŸ§¤', 'ğŸ§¥', 'ğŸ§¦', 'ğŸ‘—', 'ğŸ‘˜', 'ğŸ‘™', 'ğŸ‘š', 'ğŸ‘›', 'ğŸ‘œ', 'ğŸ‘', 'ğŸ’', 'ğŸ‘',
                             'ğŸ‘Ÿ',
                             'ğŸ¥¾', 'ğŸ¥¿', 'ğŸ‘ ', 'ğŸ‘¡', 'ğŸ‘¢', 'ğŸ‘‘', 'ğŸ‘’', 'ğŸ©', 'ğŸ“', 'ğŸ§¢', 'â›‘', 'ğŸ’„', 'ğŸ’', 'ğŸ’¼', '1',
                             '2',
                             '3',
                             '4', '5', '6', '7', '8', '9', '0', 'Û±', 'Û²', 'Û³', 'Û´', 'Ûµ', 'Û¶', 'Û·', 'Û¸', 'Û¹', 'Û°', '!',
                             '@',
                             '#',
                             '$', '%', '^', '&', '*', '(', ')', ')', '_', '+', '=', '-', '|', '|', '}', '{', '[', ']',
                             ':',
                             ':',
                             '.', '<', '/', '?', 'ØŸ', '>', 'ÙŒ', 'ØŒ', '\\', '!', '@', '#', '$', '%', '^', '&', '*', '(',
                             '_',
                             '-',
                             '+', '+', '|', ',', '|'
            , 'a', 's', 'd', 'f', 'g', 'h', 'j', 'k', 'l', 'z', 'x', 'c', 'v', 'b', 'n', 'm', 'q', 'w', 'e', 'r', 't',
                             'y',
                             'u', 'i', 'o', 'p',
                             'A', 'S', 'D', 'F', 'G', 'H', 'J', 'K', 'L', 'Q', 'W', 'E', 'R', 'T', 'Y', 'U', 'I', 'O',
                             'P',
                             'Z',
                             'X', 'C', 'V', 'B', 'N', 'M']
        self.POSETIVE_EMOJI = [':-)', '=)', ':)', '8)', ':]', '=]', '=>', '8-)', ':->', ':-]', ':â€)', ':â€™)', ':-)',
                               '=)',
                               ':3',
                               ':>', ':Ë†)', ':-3', '=>', ':->', ':-V', '=v',
                               ':-1', 'Ë†', 'Ë†', 'Ë†LË†', 'Ë†)Ë†', ':*', ':-*', ';-)', ';)', ';-]', ';]', ';->', ';>', '%-}',
                               '<3',
                               ':-D', ':D', '=D', ':-P', '=3', 'xD', ':P', '=P',
                               'O.o', 'o.O', ':v', 'B)', 'B-)', 'B|', '8|', ':â€™-)', ':!', ':-X', '=*', ':-*', ':*',
                               'ğŸ˜€', 'ğŸ˜ƒ', 'ğŸ˜„', 'ğŸ˜', 'ğŸ˜†', 'ğŸ˜…', 'ğŸ˜³', 'ğŸ˜', 'ğŸ˜º', 'ğŸ˜¸', 'ğŸ˜¹', 'ğŸ˜»', 'ğŸ˜¼', 'ğŸ’‹', 'ğŸ’ª',
                               'ğŸ‘€', 'ğŸ‘', 'ğŸ‘…', 'ğŸ‘„', 'ğŸ‘¶', 'ğŸ™‹', 'ğŸ˜', 'ğŸ¤£', 'â¤', 'ğŸ˜‚', 'ğŸ™‚', 'ğŸ™ƒ', 'ğŸ˜‰', 'ğŸ˜Š', 'ğŸ˜‡',
                               'ğŸ˜', 'ğŸ˜˜', 'ğŸ˜—', 'â˜º', 'ğŸ˜š', 'ğŸ˜™', 'ğŸ˜‹', 'ğŸ˜›', 'ğŸ˜œ', 'ğŸ˜', 'ğŸ™„', 'ğŸ‘', 'ğŸ’™', 'ğŸ€', 'ğŸŒ¸',
                               'ğŸŒ¹',
                               'ğŸŒ·'
                               ]
        self.NEGATIVE_EMOJI = ['- -', ':-(', ':(', ':[', ':-<', ':-[', '=(', ':-@', ':-&', ':-t', ':-z', ':<)', '}-(',
                               ':o',
                               ':O', ':-o', ':-O', ':-\\',
                               ':-/', ':-.', ':\\', ':â€™(', ':, (', ':â€™-(', ':, -(', ':Ëœ(ËœËœ', ':Ëœ-(',
                               'ğŸ˜Ÿ', 'ğŸ™', 'ğŸ˜®', 'ğŸ˜¯', 'ğŸ˜²', 'ğŸ˜³', 'ğŸ˜¦', 'ğŸ˜§', 'ğŸ˜®', 'ğŸ˜¨', 'ğŸ˜°', 'ğŸ˜¥', 'ğŸ˜¢', 'ğŸ˜­', 'ğŸ˜±',
                               'ğŸ˜–', 'ğŸ˜£', 'ğŸ˜', 'ğŸ˜“', 'ğŸ˜©', 'ğŸ˜«', 'ğŸ˜¤', 'ğŸ˜¡', 'ğŸ˜ ', 'ğŸ‘¿', 'ğŸ’€', 'â˜ ', 'ğŸ’©', 'ğŸ‘', 'ğŸ˜‘']
        self.EMOJI = [':-)', '=)', ':)', '8)', ':]', '=]', '=>', '8-)', ':->', ':-]', ':â€)', ':â€™)', '=)', ':3', ':>',
                      ':Ë†)',
                      '=>', ':->', ':-V', '=v', ':-1', 'Ë†', 'Ë†', 'Ë†LË†', 'Ë†)Ë†', ':*', ':-*', ';-)', ';)', ';-]', ';]',
                      ';->',
                      ';>', '%-}', '<3', ':-D', ':D', '=D', ':-P', '=3', 'xD', ':P', '=P', 'O.o', 'o.O', ':v', 'B)',
                      'B-)',
                      'B|', '8|', ':â€™-)', ':!', ':-X', '=*', ':-*', ':*', '- -', ':-(', ':(', ':[', ':-<', ':-[', '=(',
                      ':-@', ':-&', ':-t', ':-z', ':<)', '}-(', ':o', ':O', ':-o', ':-O', ':-\\', ':-/', ':-.', ':\\',
                      ':â€™(',
                      ':, (', ':â€™-(', ':, -(', ':Ëœ(ËœËœ', ':Ëœ-(', 'ğŸŒ´', 'â­•', 'ğŸ˜€', 'ğŸ’', 'ğŸ˜ƒ', 'ğŸ˜„', 'ğŸ¦–', 'ğŸŒŸ', 'ğŸ‚',
                      'ğŸ˜',
                      'ğŸŠ', 'ğŸ“', 'ğŸ˜†', 'ğŸ˜…', 'ğŸ”ª', ':', 'ğŸ¤£', 'ğŸ˜‚', 'ğŸ™‚', 'â£', 'ğŸ™ƒ', 'â˜˜', 'ğŸ˜‰', 'ğŸ˜Š', 'Ùª', 'ğŸ˜‡', 'ğŸ¥°',
                      'ğŸ˜',
                      'ğŸ¤©', 'ğŸ˜˜', 'ğŸ“˜', 'ğŸ˜—', 'â˜º', 'ğŸ˜š', 'ğŸ˜™', 'ğŸ˜‹', 'ğŸ˜›', 'ğŸ˜œ', 'ğŸ¤ª', 'ğŸ’«', 'ğŸ””', 'âœ…', 'ğŸ˜', 'ğŸ¤‘',
                      'ğŸ¤—',
                      'ğŸ¤­', 'ğŸ¤«', 'ğŸ–¤', 'ğŸ½ï¸', 'ğŸ¼ï¸', 'ğŸ¤”', 'ğŸ¤', 'ğŸ¤¨', 'ğŸ˜', 'ğŸ˜‘', 'ğŸ˜¶', 'ğŸ“¥', 'ğŸ’£', 'ğŸ€', 'ğŸ¦‹', 'ğŸ’£',
                      'ğŸ“Œ',
                      'ğŸ˜', 'ğŸ˜’', 'ğŸ™„', 'ğŸ“†', 'ğŸ˜¬', 'ğŸ¤¥', 'ğŸ˜Œ', 'ğŸ˜”', 'ğŸ˜ª', 'ğŸ¤¤', 'ğŸŒ’', 'ğŸ˜´', 'ğŸ˜·', 'ğŸ¤’', 'ğŸ¤•', 'ğŸ¤¢',
                      'ğŸ¤®',
                      'ğŸ¤§', 'ğŸ¥µ', 'ğŸ¥¶', 'ğŸ¥´', 'ğŸ˜µ', 'ğŸ¤¯', 'ğŸ¤ ', 'ğŸ¦Œ', 'ğŸ¥³', 'ğŸ˜', 'ğŸ¤“', 'ğŸ§', 'ğŸ˜•', 'ğŸ»', 'ğŸš¨', 'ğŸ˜Ÿ',
                      'ğŸ™',
                      'â˜¹', 'ğŸ˜®', 'ğŸ˜¯', 'ğŸ˜²', 'ğŸ˜³', 'ğŸ¥º', 'ğŸ˜¦', 'ğŸ˜§', 'ğŸ’ï¸', 'ğŸŒ¶', 'ğŸ¶', 'ğŸ˜¨', 'ğŸ˜°', 'ğŸ˜¥', 'ğŸ˜¢', 'ğŸ˜­',
                      'ğŸ˜±',
                      'ğŸ˜–', 'ğŸ˜£', 'ğŸ˜', 'ğŸ˜“', 'ğŸ˜©', 'ğŸ˜«', 'ğŸ’•', 'ğŸ˜¤', 'ğŸ˜¡', 'ğŸ˜ ', 'ğŸ¤¬', 'ğŸ´', 'ğŸ¥', 'ğŸ˜ˆ', 'ğŸ‘¿', 'ğŸ”¸',
                      'ğŸŒ¸',
                      'ğŸ’€', 'â˜ ', 'ğŸ’©', 'ğŸ¤¡', 'ğŸ‘¹', 'ğŸ‘º', 'ğŸ‘»', 'ğŸ‘½', 'ğŸ‘¾', 'â˜”', 'ğŸ¤–', 'ğŸ˜º', 'ğŸ˜¸', 'ğŸ˜¹', 'ğŸ˜»', 'ğŸ˜¼',
                      'ğŸ˜½',
                      'ğŸ™€', 'ğŸ˜¿', 'ğŸ˜¾', 'ğŸ’‹', 'ğŸ‘‹', 'ğŸ¤š', 'ğŸ–', 'ğŸ’”', 'âœ‹', 'ğŸ™ˆ', 'ğŸ’š', 'ğŸ––', 'ğŸ‘Œ', 'âœŒ', 'ğŸ¤', 'ğŸ¤Ÿ',
                      'ğŸ¤˜',
                      'ğŸ”¥', 'ğŸ¤™', 'ğŸ‘ˆ', 'ğŸ‘‰', 'ğŸ‘†', 'ğŸ–•', 'ğŸ‘‡', 'â˜', 'ğŸ‘', 'ğŸ‘', 'ğŸ’œ', 'âœŠ', 'ğŸ‘Š', 'ğŸ¤›', 'ğŸ¤œ', 'ğŸ‘',
                      'ğŸ™Œ',
                      'ğŸ‘', 'ğŸ¤²', 'ğŸ¤', 'ğŸ™', 'âœ', 'ğŸ’…', 'ğŸ¤³', 'ğŸ”°', 'ğŸ’ª', 'ğŸ¦µ', 'ğŸ¦¶', 'ğŸ’¥', 'ğŸ‘‚', 'ğŸ‘ƒ', 'ğŸ§ ', 'ğŸ‚',
                      'ğŸ¥',
                      'ğŸŒ¸', 'ğŸŒº', 'ğŸ¾', 'âœ¨', 'ğŸ¦·', 'ğŸ¦´', 'ğŸ‘€', 'ğŸ‘', 'ğŸ‘…', 'ğŸ‘„', 'ğŸ‘¶', 'ğŸ§’', 'ğŸ‘¦', 'ğŸ‘§', 'ğŸ§‘', 'ğŸ‘±',
                      'ğŸ‘¨',
                      'ğŸ§”', 'ğŸ‘±', 'ğŸ‘¨', 'ğŸ‘¨', 'ğŸ‘¨', 'ğŸ‘¨', 'ğŸ‘©', 'ğŸ‘±', 'ğŸ‘©', 'ğŸ‘©', 'ğŸ‘©', 'ğŸ‘©', 'ğŸ§“', 'â™¦', 'ğŸ‘´', 'ğŸ‘µ',
                      'ğŸ™',
                      'ğŸ™', 'ğŸ™', 'ğŸ™', 'ğŸ™', 'ğŸ™', 'ğŸ™…', 'ğŸ™…', 'ğŸ™…', 'ğŸ™†', 'ğŸ™†', 'ğŸ™†', 'ğŸ’', 'ğŸ’', 'ğŸ’', 'ğŸ™‹', 'ğŸ™‹',
                      'ğŸ™‹',
                      'ğŸ™‡', 'ğŸ™‡', 'ğŸ™‡', 'ğŸ¤¦', 'ğŸ¤¦', 'ğŸ¤¦', 'ğŸ¤·', 'ğŸ¤·', 'ğŸ¤·', 'ğŸ‘¨', 'ğŸ‘©', 'ğŸ‘¨', 'ğŸ‘©', 'ğŸ‘¨', 'ğŸ‘©', 'ğŸ‘¨',
                      'ğŸ‘©',
                      'ğŸ‘¨', 'ğŸ‘©', 'ğŸ‘¨', 'ğŸ‘©', 'ğŸ‘¨', 'ğŸ‘©', 'ğŸ‘¨', 'ğŸ‘©', 'ğŸ‘¨', 'ğŸ‘©', 'ğŸ‘¨', 'ğŸ‘©', 'ğŸ‘¨', 'ğŸ‘©', 'ğŸ“²', 'ğŸ‘¨',
                      'ğŸ‘©',
                      'ğŸ‘¨', 'ğŸ‘©', 'ğŸ‘¨', 'ğŸ‘©', 'ğŸ‘¨', 'ğŸ‘©', 'ğŸ‘¨', 'ğŸ‘©', 'ğŸ‘®', 'ğŸ‘®', 'ğŸ‘®', 'ğŸ†', 'ğŸ•µ', 'ğŸ•µ', 'ğŸ•µ', 'ğŸ’‚',
                      'ğŸ’‚',
                      'ğŸ’‚', 'ğŸ‘·', 'ğŸ‘·', 'ğŸ‘·', 'ğŸ¤´', 'ğŸ‘¸', 'ğŸ‘³', 'ğŸ‘³', 'ğŸ‘³', 'ğŸ‘²', 'ğŸ§•', 'ğŸ¤µ', 'ğŸ‘°', 'ğŸ¤°', 'ğŸŒ¹', 'â¬‡',
                      'â™‚',
                      'â¤', 'ğŸ¤±', 'ğŸ‘¼', 'ğŸ…', 'ğŸ¤¶', 'ğŸ’™', 'ğŸ', 'ğŸ¦¸', 'ğŸ¦¸', 'ğŸ¦¹', 'ğŸ¦¹', 'âœ', 'â™€', 'ğŸ¦¹', 'ğŸ§™', 'ğŸ§™', 'ğŸ§™',
                      'ğŸ§š', 'ğŸ§š', 'ğŸ§š', 'ğŸ§›', 'ğŸ§›', 'â¿', 'ğŸ§›', 'ğŸ§œ', 'ğŸ§œ', 'ğŸ§œ', 'ğŸ§', 'ğŸ§', 'ğŸ§', 'ğŸ§', 'ğŸ§', 'ğŸ§',
                      'ğŸ§Ÿ',
                      'ğŸ§Ÿ', 'ğŸ”´', 'ğŸ’†', 'ğŸ’†', 'ğŸ’†', 'ğŸ’‡', 'ğŸ’‡', 'ğŸ’‡', 'ğŸš¶', 'ğŸš¶', 'ğŸš¶', 'ğŸƒ', 'ğŸƒ', 'ğŸƒ', 'ğŸ’ƒ', 'ğŸ•º',
                      'ğŸ•´',
                      'ğŸ‘¯', 'ğŸ‘¯', 'ğŸ‘¯', 'ğŸ’¢', 'ğŸ»', 'ğŸ§–', 'ğŸ§–', 'ğŸ§˜', 'ğŸ‘­', 'ğŸ‘«', 'ğŸ‘¬', 'ğŸ’', 'ğŸ‘¨', 'ğŸ‘©', 'ğŸ’‘', 'ğŸ‘¨',
                      'ğŸ‘©',
                      'ğŸ‘ª', 'ğŸ‘¨', 'ğŸ‘¨', 'ğŸ‘¨', 'ğŸ‘¨', 'ğŸ‘¨', 'ğŸ‘¨', 'ğŸ‘¨', 'ğŸ‘¨', 'ğŸ’™', 'ğŸ’›', 'ğŸ”µ', 'ğŸ™Š', 'âš«', 'ğŸ‘¨', 'ğŸ‘¨',
                      'ğŸ‘©',
                      'ğŸ‘©',
                      'ğŸ‘©', 'ğŸ‘©', 'ğŸ‘©', 'ğŸ”º', 'ğŸ‘¨', 'ğŸ‘¨', 'ğŸ‘¨', 'ğŸ‘¨', 'ğŸ‘¨', 'ğŸ‘©', 'ğŸ‘©', 'ğŸ‘©', 'ğŸ‘©', 'ğŸ‘©', 'ğŸ—£', 'ğŸ‘¤',
                      'ğŸ‘¥',
                      'ğŸ‘£', 'ğŸ§³', 'ğŸŒ‚', 'â˜‚', 'ğŸ§µ', 'ğŸ§¶', 'ğŸ‘“', 'ğŸ•¶', 'ğŸ¥½', 'ğŸ¥¼', 'ğŸ‘”', 'ğŸ‘•', 'ğŸ‘–', 'ğŸ§£', 'ğŸ§¤', 'ğŸ§¥',
                      'ğŸ§¦',
                      'ğŸ‘—', 'ğŸ‘˜', 'ğŸ‘™', 'ğŸ‘š', 'ğŸ‘›', 'ğŸ‘œ', 'ğŸ‘', 'ğŸ’', 'ğŸŒ·', 'ğŸ‘', 'ğŸ‘Ÿ', 'ğŸ¥¾', 'ğŸ¥¿', 'ğŸ‘ ', 'ğŸ‘¡', 'ğŸ‘¢',
                      'ğŸ‘‘',
                      'ğŸ‘’',
                      'ğŸ©', 'ğŸ“', 'ğŸ§¢', 'â›‘', 'ğŸ’„', 'ğŸ’', 'ğŸ’¼', '1', '2', '3', '4', '5', '6', '7', '8', '9', '0', 'Û±',
                      'Û²',
                      'Û³', 'Û´', 'Ûµ', 'Û¶', 'Û·', 'Û¸', 'Û¹', 'Û°', '!', '@', '#', '$', '%', '^', '&', '*', '(', ')', ')',
                      '_',
                      '+', '=', '-', '|', '|', '}', '{', '[', ']', ':', ':', ',', '.', '<', '/', '?', 'ØŸ', '>', 'ğŸ’™',
                      'ğŸ€',
                      'ğŸŒ¸', 'ğŸŒ¹']
        self.badword = ['Ø¯Ø²Ø¯', 'Ø§Ø³Ú©Ù„', 'Ø´Ø±Ù', 'Ù†Ù…ÛŒØ¯Ù‡', 'Ø­Ø±ÙˆÙ…', 'Ø¢Ù†ØªÙ†', 'Ø¶Ø¹ÛŒÙ', 'Ø¶Ø¹ÛŒÙÙ‡', 'Ø§ÙØªØ¶Ø§Ø­', 'Ú©Ø³Ú©Ø´', 'Ø¹ÙˆØ¶ÛŒ',
                        'Ù…Ø³Ø¯ÙˆØ¯',
                        'Ø§Ø´ØºØ§Ù„', 'Ù…Ù„Øª', 'Ù…Ù„ØªÙˆ', 'Ø¯Ø±Ø¯', 'Ø¯Ø±Ø¯Ù…ÙˆÙ†', 'Ø¯Ø±Ø¯', 'Ú¯Ø±ÙˆÙ†', 'Ú¯Ø±Ø§Ù†', 'Ø¯Ø²Ø¯Ø§', 'Ø¯Ø²Ø¯ÛŒ', 'Ú©ÙˆÙ†', 'Ø±ÛŒØ¯ÛŒÙ†',
                        'Ø±ÛŒØ¯ÛŒ',
                        'Ø³Ø±Ø¹Øª', 'Ú©Ù…Ù‡', 'Ø¸Ø§Ù„Ù…', 'Ú©Ø³Ø®Ù„', 'Ø¨ÛŒØ´Ø±Ù', 'Ù…Ø±Ú¯', 'Ù…Ù…Ù„Ú©Øª', 'ØªÛŒØº', 'Ù‚ÛŒÙ…Øª', 'Ú¯Ø±ÙˆÙ†Ù‡', 'Ú©Ø«ÛŒÙ',
                        'Ø¨ÛŒØª Ø§Ù„Ù…Ø§Ù„',
                        'Ø¨ÛŒØªØ§Ù„Ù…Ø§Ù„', 'Ø¬ÛŒØ¨', 'Ø²ÙˆØ±', 'ØªÙ', 'Ø¹ÙˆØ¶ÛŒ', 'Ú©Ø«Ø§ÙØª', 'Ø®Ø§Ú©', 'Ø¨Ø®ÙˆØ±', 'Ù‚Ø·Ø¹', 'Ø¨Ø¯ØªØ±ÛŒÙ†', 'ØªØ®Ù…', 'Ø¯Ø±ÙˆØº',
                        'Ú¯Ø±ÙˆÙ†',
                        'Ù…ÙØª', 'Ú¯Ø¯Ø§', 'Ø®Ø±', 'Ø¨ÛŒØ´Ø±Ù', 'Ø§ÙØªØ¶Ø§Ø­', 'Ù…Ø³Ø®Ø±', 'Ø´Ú©Ø§ÛŒØª', 'Ù„Ø¹Ù†Øª', 'Ú†Ø±Øª', 'Ø¨ÛŒØ´Ø¹ÙˆØ±', 'Ø¶Ø¹ÛŒÙ',
                        'Ø³Ø±Ú©Ø§Ø±', 'Ú©ÙˆØ³',
                        'Ø¯Ø±Ø³Øª Ùˆ Ø­Ø³Ø§Ø¨ÛŒ', 'Ø´Ø§Ø±Ú˜', 'ØªØ¨Ù„ÛŒØºØ§Øª', 'Ú©Ù„Ø§Ù‡', 'Ú©ÛŒØ±', 'Ù…Ø®', 'Ú¯ÙˆÙ‡', 'Ø§Ø¹ØµØ§Ø¨', 'Ú©Øµ', 'ØªØ¹Ø±ÙÙ‡', 'Ø´Ø¹ÙˆØ±',
                        'Ø³Ø±Ú©Ø§Ø±', 'Ù…Ø¶Ø®Ø±Ù']
        self.goodword = ['Ù…Ù†ÙˆÙ†', 'Ø´Ú©Ø±', 'Ù„Ø§ÛŒÚ©', 'like', 'Ø¯Ù…Øª', 'Ú¯Ø±Ù…', 'Ø­Ø§Ù„', 'ØªØ´Ú©Ø±', 'Ù…ÙˆÙÙ‚', 'Ø¹Ø§Ù„ÛŒ', 'Ø¢ÙØ±ÛŒÙ†', 'Ø§ÙØ±ÛŒÙ†',
                         'Ù…Ú†Ú©Ø±',
                         'Ù…ÙˆÙÙ‚', 'Ø¹Ø²ÛŒØ²', 'Ø®ÙˆØ´', 'Ø§Ù„Ø¹Ø§Ø¯Ù‡', 'Ø³Ù¾Ø§Ø³', 'Ø§Ù„Ù„Ù‡']

        self.Stopwords = []
        try:
            CLStopwords = list()
            with open(self.root_path+"resources/polarity_stopword.txt", 'r', encoding='utf-8') as file_reader:
                CLStopwords = file_reader.readlines()
            for word in CLStopwords:
                word = word.strip()
                self.Stopwords.append(word)
        except Exception as e:
            logger.info("EX: " + str(e))
        self.WordDict = []
        try:
            with open(self.root_path+"resources/polarity_dict.json", encoding='utf-8') as json_file:
                self.WordDict = json.load(json_file)
            for word in self.badword:
                Value = [0, 1]
                self.WordDict[word] = Value
            for word in self.goodword:
                Value = [1, 0]
                self.WordDict[word] = Value
        except Exception as e:
            logger.info("EX: " + str(e))


    def word_duplicat_remover(self, word):
        '''
              :param Token: Word
              :return: word that removed duplicate char
           '''
        if (word == ''):
            return ''
        charlist = list(word)
        return_word = ''
        for i in range(len(charlist) - 1):
            if charlist[i] != charlist[i + 1]:
                return_word = return_word + charlist[i]
        return_word = return_word + charlist[len(charlist) - 1]
        return return_word

    def mention_remover(self, sentance):
        '''
           :param Token: sentance
           :return: remove mention sentance text
        '''
        rsentence = ''
        charlist = list(sentance)
        mentionflag = False
        for i in range(len(charlist)):
            if charlist[i] == '@':
                mentionflag = True
            if charlist[i] == ' ':
                mentionflag = False
            if not mentionflag:
                rsentence = rsentence + charlist[i]
        return rsentence

    def persian_word_extractor(self, Sentance):
        '''
          :param Sentance
          :return: remove other unalphbet char
          '''

        WORD = re.compile(r'\w+')
        ESentance = list()
        for word in WORD.findall(Sentance):
            ExWord = ''
            EWord = list()
            Word = list(word)
            for Char in Word:
                if Char in self.AlphabetList:
                    ExWord = ExWord + Char
                else:
                    if ExWord != '':
                        EWord.append(ExWord)
                    ExWord = ''
            if ExWord != '':
                EWord.append(ExWord)
            ESentance.extend(EWord)
        ESentance = [x + ' ' for x in ESentance]
        ESentance = ''.join(ESentance)
        return ESentance

    def Polarity_detect(self, comment):
        word_count = 0
        sen = comment
        Normalizer = PolarityNormalizer(sen)
        sen = Normalizer.text
        Normsen = self.mention_remover(sen)
        Normsen = self.persian_word_extractor(Normsen)
        posetiveEmoji = [value for value in self.POSETIVE_EMOJI if value in sen]
        posetive_count = len(posetiveEmoji)
        negativemoji = [value for value in self.NEGATIVE_EMOJI if value in sen]
        negative_count = len(negativemoji)
        if (posetive_count > negative_count):
            sent_score = 1
        elif (posetive_count < negative_count):
            sent_score = -1
        else:
            Words = re.sub('[' + string.punctuation + 'ØŒ' + 'Ø›' ']', ' ', Normsen).split()
            sent_score = 0
            CListWord = list()
            for word in Words:
                word = self.word_duplicat_remover(word)
                for emoji in self.EMOJI:
                    if emoji in word:
                        word = word.replace(emoji, '')
                        CListWord.append(emoji)
                CListWord.append(word)
            Words = CListWord
            NormSen = ''
            for word in Words:
                word = self.word_duplicat_remover(word)
                if word not in self.Stopwords:
                    if word in self.WordDict:
                        if self.WordDict[word][0] > 0 or self.WordDict[word][1] > 0:
                            word_count = word_count + 1
                            word_sum = self.WordDict[word][0] * 0.78 + self.WordDict[word][1] * 0.22
                            word_score = (self.WordDict[word][0] * 0.22 - self.WordDict[word][1] * 0.78) / word_sum
                            sent_score = sent_score + word_score
                        NormSen += word + ' '

            BadwordCount = [value for value in self.badword if value in sen]
            GoodwordCount = [value for value in self.goodword if value in sen]
            sent_score = sent_score - (float(len(BadwordCount)))
            word_count = word_count + len(BadwordCount)
            sent_score = sent_score + (float(len(GoodwordCount)))
            word_count = word_count + len(GoodwordCount)
            try:
                sent_score = sent_score / word_count
            except:
                sent_score = 0
        # Tag = 0
        Tag = 'z'
        sent_score = sent_score - 0.055
        if sent_score >= 0.18:
            # Tag = 2
            Tag = 'p'
        elif sent_score < -0.1:
            # Tag = -2
            Tag = 'n'
        else:
            # Tag = 0
            Tag = 'z'
            if sent_score < -0.02:
                # Tag = -1
                Tag = 'n'
            elif sent_score > 0.05:
                # Tag = 1
                Tag = 'p'
        result = {'lable': Tag, 'score': sent_score}
        return result


if __name__ == '__main__':
    logging.basicConfig(stream=sys.stdout,
                        format='[%(asctime)s] %(filename)s %(lineno)d %(levelname)s %(name)s %(message)s', level=logging.INFO)
    polarity = PersianPolarity(logging)
    label = polarity.Polarity_detect('Ø³Ù„Ø§Ù… Ù…Ù† Ø®Ø§Ù„Ù… Ø®ÙˆØ¨Ù‡ Ø®ÙˆØ¨Ù‡ Ø±ÙÙ‚Ø§')
    print(label)
